!function(t){"use strict";var a={init:function(a){var e={width:"auto",height:"auto",direction:"left",scrollDelay:85,scrollAmount:6,circular:!1,dragAndDrop:!0,hoverStop:!0,scrollStop:!0,startShow:!1,xml:!1,touchEvent:!0,stopOutScreen:!0,create:function(){},moveStart:function(){},moveStop:function(){},drag:function(){},dragStart:function(){},dragStop:function(){},wayEnd:function(){},removeContentFadeDuration:300};return a&&t.extend(e,a),this.each(function(){var a=t(this).addClass("mWrap"),o=t("*").index(t(this));a.data().mElIndex=o;var d=function(a,e){var o,d=a.position(),n=e||t(document),i={right:n.outerWidth()-(a.position().left+a.outerWidth()),bottom:n.outerHeight()-(a.position().top+a.outerHeight())};return t.extend(i,d),i};a.data().style=a.attr("style"),t.extend(e,a.data()),t.extend(a.data(),e),t(".mMove",a).length||a.wrapInner('<div class="mMove"></div>');var n=t(".mMove",a);t(".mItem",n).length||n.wrapInner('<div class="mItem"></div>'),a.css({position:"relative",overflow:"hidden",maxWidth:"100%",height:a.data().height,width:a.data().width}),a.data().scrollDelay<=0&&(a.data().scrollDelay=85),a.data().outerSizeFunc=function(t){return"top"===a.data().direction||"bottom"===a.data().direction?t.outerHeight():t.outerWidth()},n.data().style=n.attr("style"),a.data().updateCont||n.css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",float:"left"}),a.data().mMove=n;var i=function(){if(a.data().clickEventFlag=!0,a.data().outerSizeFunc(n)>0){var e,o,r,s,c,l=t(".mItem",a);l.each(function(){t(this).data().style=t(this).attr("style"),t(this).css({display:"inline",zoom:1})});var u=function(t,e){if(e.css({paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}),e.length&&!a.data().circular){var o={},d={};o["padding-"+t]=a.data().outerSizeFunc(a),d["padding-"+t]=0,e.css(o),e.eq(0).css(d)}};a.data().splittingString=u;var m=t("<div>").addClass("cloneContent").html(n.html());"left"===a.data().direction||"right"===a.data().direction?(n.css({whiteSpace:"nowrap"}),a.data().splittingString("left",l),a.css({minHeight:n.outerHeight()}),m.css({display:"inline-block"}),a.data().axis="hor"):(n.css({whiteSpace:"normal"}),l.css({display:"block"}),a.data().splittingString("top",l),0===a.outerHeight()&&alert("Set Height Parametr for Plugin liMarquee"),m.css({display:"block"}),a.data().axis="vert"),document.documentMode&&a.add(a.find("*")).attr("unselectable","on");var v="mousemove."+a.data().mElIndex,p="mousedown."+a.data().mElIndex,f="mouseup."+a.data().mElIndex,h="click."+a.data().mElIndex;a.data({touchScreen:!1,teleport:!1,dragging:!1,pause:!1}),"ontouchstart"in window&&(v="touchmove."+a.data().mElIndex,p="touchstart."+a.data().mElIndex,f="touchend."+a.data().mElIndex,a.data().touchScreen=!0,1e3>t(window).width()&&(a.data().hoverStop=!1)),a.data({moveEvent:v,mousedownEvent:p,mouseupEvent:f,clickEvent:h});var g=function(t){0!==a.data().outerSizeFunc(t)?a.data().outerSizeFunc(t)<a.data().outerSizeFunc(a)&&a.data().circular&&(m.clone().appendTo(t),a.data().cloneContent(t)):console.log("The string is empty or contains invalid style")};a.data().cloneContent=g,a.data().cloneContent(n);var $=function(t,e){if(!a.data().pause&&(void 0===t&&(t=a.data().startPos),void 0===e&&(e=a.data().endPos),0!==e&&-0!==e)){var o=e-t;o<0&&(o*=-1);var d=o*a.data().scrollDelay/a.data().scrollAmount,i={},r={};r={left:"auto",right:"auto",top:"auto",bottom:"auto"},(i={left:"auto",right:"auto",top:"auto",bottom:"auto"})[a.data().direction]=t,r[a.data().direction]=e,n.css(i),a.addClass("mIni"),a.data().stopped=!1,void 0!==a.data().moveStart&&a.data().moveStart(),n.stop(!0).animate(r,d,"linear",function(){void 0!==a.data().moveStop&&a.data().moveStop(),void 0!==a.data().wayEnd&&a.data().wayEnd(),a.data().teleport=!0,$()})}};a.data().anim=$,a.data().circular&&(e=n.clone().addClass("clone").css({position:"absolute",width:"100%",height:"100%",opacity:0}),"top"===a.data().direction||"bottom"===a.data().direction?e.css({left:0}):e.css({top:0}),r={},(o={})[a.data().direction]="-100%",r[a.data().direction]="100%",s=e.clone().addClass("cloneBefore").css(o).appendTo(n),c=e.clone().addClass("cloneAfter").css(r).appendTo(n),a.data().circular&&s.add(c).css({opacity:1})),void 0!==a.data().create&&a.data().create();var S=function(){return d(n,a)[a.data().direction]};a.data().nowPos=S;var E=function(e){var o=e;a.data().touchScreen&&1===e.originalEvent.targetTouches.length&&(o=e.originalEvent.targetTouches[0]);var d={left:o.pageX,top:o.pageY,right:t(window).width()-o.pageX,bottom:t(window).height()-o.pageY};return t.extend(o,d),o};a.data().hoverStop&&a.on("mouseenter."+a.data().mElIndex,function(){a.off("mouseleave."+a.data().mElIndex),a.data().dragAndDrop&&t("html").addClass("grab"),a.data().stopped||(n.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()),a.on("mouseleave."+a.data().mElIndex,function(){t(document).off(v),t("html").removeClass("grab"),t("html").removeClass("grabbing"),$(a.data().nowPos())})}),(!a.data().touchScreen&&a.data().dragAndDrop||a.data().touchScreen&&a.data().touchEvent)&&a.on(p,{passive:!0},function(e){t(document).off(v),t(document).off(f),a.off("mouseleave."+a.data().mElIndex),t("html").addClass("grabbing"),a.data().stopped||(n.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop());var o=E(e)[a.data().direction],d=E(e).top,i=E(e).left,r=0,s=0,c=1;if(t(document).on(v,function(e){a.data().clickEventFlag=!1,a.off("mouseleave."+a.data().mElIndex),t("html").addClass("grabbing"),a.data().dragging||(void 0!==a.data().dragStart&&a.data().dragStart(),a.data().dragging=!0);var l=a.data().nowPos();a.data().stopped||(n.stop(!0),a.data().stopped=!0);var u=E(e)[a.data().direction],m=function(){u>o&&(c=1),u<o&&(c=-1);var t=o-u;o=u;var e={};if(e[a.data().direction]="-="+t,a.data().circular?(l<=a.data().outerSizeFunc(n)&&!a.data().teleport&&(a.data().teleport=!0),l<=a.data().outerSizeFunc(a)-a.data().outerSizeFunc(n)&&c<0&&a.data().teleport&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="+="+a.data().outerSizeFunc(n)),l>=0&&c>0&&a.data().teleport&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="-="+a.data().outerSizeFunc(n))):(l<=-a.data().outerSizeFunc(n)&&c<0&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="+="+(a.data().outerSizeFunc(n)+a.data().outerSizeFunc(a))),l>=a.data().outerSizeFunc(a)&&c>0&&(void 0!==a.data().wayEnd&&a.data().wayEnd(),e[a.data().direction]="-="+(a.data().outerSizeFunc(n)+a.data().outerSizeFunc(a)))),void 0!==a.data().drag&&a.data().drag(),n.css(e),a.data().touchEvent)return!1};if("hor"==a.data().axis){var v=E(e).top,p=E(e).left;(r+=Math.abs(v-d))>(s+=Math.abs(p-i))?t(document).trigger(f):m()}else m()}),t(document).on(f,{passive:!0},function(e){a.data().dragging&&(void 0!==a.data().dragStop&&a.data().dragStop(),a.data().dragging=!1),t(e.target).is(a)||t(e.target).closest(a).length?(t(document).off(v),t("html").removeClass("grabbing"),a.data().hoverStop?a.trigger("mouseenter."+a.data().mElIndex):$(a.data().nowPos())):(t(document).off(v),$(a.data().nowPos()),t("html").removeClass("grab"),t("html").removeClass("grabbing")),t(document).off(f),setTimeout(function(){a.data().clickEventFlag=!0},300)}),!a.data().touchScreen)return!1});var y=function(t){var a=t.data().mMove,e=t.data().outerSizeFunc(t),o=-t.data().outerSizeFunc(a);(t.data().startPos=e,t.data().endPos=o,t.data().circular)?(o=-(t.data().outerSizeFunc(a)+(t.data().outerSizeFunc(a)-t.data().outerSizeFunc(t))),t.data().endPos=o,$(t.data().startShow?t.data().outerSizeFunc(a):t.data().outerSizeFunc(t)+t.data().outerSizeFunc(a))):$(t.data().startShow?0:e)};a.data().getPosition=y;var x=function(t){var a=t.data().mMove,e=t.data().outerSizeFunc(t),o=-t.data().outerSizeFunc(a);t.data().startPos=e,t.data().endPos=o,t.data().circular&&(o=-(t.data().outerSizeFunc(a)+(t.data().outerSizeFunc(a)-t.data().outerSizeFunc(t))),t.data().endPos=o)};a.data().setPosition=x,a.data().updateCont||a.data().getPosition(a);var I=function(){document.hidden?a.data().stopped||(n.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()):$(a.data().nowPos())};t(document).on("visibilitychange."+a.data().mElIndex,function(){I()});var w=function(){};t(window).on("resize."+a.data().mElIndex,function(){clearTimeout(w),w=setTimeout(function(){a.liMarquee("resetPosition")},300)});var F=function(){},C=function(){a.data().stopOutScreen&&(a.offset().top+a.outerHeight()<t(window).scrollTop()||a.offset().top>t(window).scrollTop()+t(window).height())?a.data().stopped||(n.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()):$(a.data().nowPos())};t(window).on("scroll."+a.data().mElIndex,function(){a.data().scrollStop&&!a.data().stopped&&(n.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()),clearTimeout(F),F=setTimeout(function(){C()},100)}),a.find("a").on("click",function(){if(!a.data().clickEventFlag)return!1}),C()}else n.text('marquee "'+a.attr("class")+'" elements is hidden or missing'),i(),a.liMarquee("stop"),a.liMarquee("removeContent")};a.data().xml?t.ajax({url:a.data().xml,dataType:"xml",success:function(a){for(var e=t(a).find("item"),o=e.length,d=0;d<o;d++){var r=e.eq(d),s=r.find("title").text(),c=r.find("link").text();r.find("link").length?t('<div class="mItem"><a href="'+c+'">'+s+"</a></div>").appendTo(n):t('<div class="mItem">').text(s).appendTo(n)}i()}}):i()})},getContent:function(){var a,e=t(this).data().mMove;if(e.is(":empty"))a=!1;else{var o=e.html(),d=t("<div>").html(o);d.find(".clone").remove(),d.find(".cloneContent").remove(),a=t.trim(d.html())}return a},getLength:function(){var a,e=t(this).data().mMove;return e.is(":empty")?0:e.children(".mItem").length},addContent:function(a,e){return this.each(function(){var o=t(this),d=o.data().mMove,n=parseFloat(o.data().removeContentFadeDuration),i=function(){if(o.data().removing)setTimeout(function(){i()},n);else{var t='<div class="mItem">'+a+"</div>",r=o.liMarquee("getContent"),s=r;if(!d.find(".mItem").length&&r&&(r='<div class="mItem">'+r+"</div>"),a){if(e){var c=o.liMarquee("getLength");console.log(c),e="last",s=r?r+t:t,e="first",s=r?t+r:t}else("left"===o.data().direction||"top"===o.data().direction)&&(s=r?r+t:t),("right"===o.data().direction||"bottom"===o.data().direction)&&(s=r?t+r:t)}o.liMarquee("removeContent");var l=function(){o.data().removing?setTimeout(function(){l()},n):(d.html(s),r&&(o.data().updateCont=!0),o.liMarquee(o.data()),o.data().updateCont&&(o.data().setPosition(o),o.data().anim(o.data().nowPos())))};l()}};i()})},removeContent:function(){return this.each(function(){t(this).data().removing=!0;var a=t(this),e=a.data().mMove,o=parseFloat(a.data().removeContentFadeDuration);e.children().animate({opacity:0},o),setTimeout(function(){a.data().updateCont=!0,a.data().stopped||(e.stop(!0),a.data().stopped=!0),a.off("mouseenter."+a.data().mElIndex),a.off("mouseleave."+a.data().mElIndex),a.off(t(this).data().mousedownEvent),t(window).off("resize."+a.data().mElIndex),t(window).off("scroll."+a.data().mElIndex),t(document).off(a.data().moveEvent),t(document).off(a.data().mouseupEvent),a.data().stopped||(e.stop(!0),a.data().stopped=!0),e.empty(),a.data().removing=!1},o)})},changeOptions:function(a){return this.each(function(){var e=t(this);e.data().mMove;var o=!1;for(var d in a)"scrollAmount"!=d&&"scrollDelay"!=d&&"direction"!=d&&"removeContentFadeDuration"!=d&&(o=!0),"direction"==d&&(("right"==a[d]||"left"==a[d])&&"left"!=e.data().direction&&"right"!=e.data().direction&&(o=!0),("top"==a[d]||"bottom"==a[d])&&"top"!=e.data().direction&&"bottom"!=e.data().direction&&(o=!0));t.extend(e.data(),a),o?(e.liMarquee("destroy"),e.data().updateCont=!1,e.liMarquee(e.data())):(e.data().setPosition(e),e.data().anim(e.data().nowPos()))})},destroy:function(){var a=t(this),e=a.data().mMove;a.removeAttr("style").attr("style",a.data().style),a.data().stopped||(e.stop(!0),a.data().stopped=!0),e.removeAttr("style").attr("style",e.data().style).removeData(),t(".mItem",a).each(function(){t(this).removeAttr("style").attr("style",t(this).data().style).removeData()}),a.off("mouseenter."+a.data().mElIndex),a.off("mouseleave."+a.data().mElIndex),a.off(a.data().mousedownEvent),t(window).off("resize."+a.data().mElIndex),t(window).off("scroll."+a.data().mElIndex),a.data().moveEvent&&t(document).off(a.data().moveEvent),a.data().mouseupEvent&&t(document).off(a.data().mouseupEvent),t(document).off("visibilitychange."+a.data().mElIndex),t(".clone",a).remove(),t(".cloneContent",a).remove();var o="";t(".mItem,mMove").each(function(){o+=t(this).html()+" ",t(this).remove()}),e.remove(),a.html(o).removeClass("mIni").css({opacity:1})},stop:function(){return this.each(function(){var a=t(this);if(a.is(".mIni")){var e=a.data().mMove;a.data().pause||(a.data().pause=!0,a.data().stopped||(e.stop(!0),a.data().stopped=!0,void 0!==a.data().moveStop&&a.data().moveStop()))}})},start:function(a){return this.each(function(){var e=t(this);e.data().pause&&setTimeout(function(){e.data().pause=!1,e.data().setPosition(e),e.data().anim(e.data().nowPos()),t(window).trigger("scroll."+e.data().mElIndex)},a||0)})},resetPosition:function(){return this.each(function(){var a=t(this);if(a.is(":visible")){var e=a.data().mMove;a.data().stopped||(e.stop(!0),a.data().stopped=!0),("left"===a.data().direction||"right"===a.data().direction)&&a.css({minHeight:e.outerHeight()}),a.data().setPosition(a),a.data().anim(a.data().nowPos()),t(window).trigger("scroll."+a.data().mElIndex)}})}};t.fn.liMarquee=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Метод "+e+" в jQuery.liMarquee doesn't exist"):a.init.apply(this,arguments)}}(jQuery);